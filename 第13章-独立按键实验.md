# 按键介绍

>按键是一种电子开关，使用时轻轻按开关按钮就可使开关接通，当松开手时，开关断开。开发板上使用的按键及内部简易图如下图所示：

>由于机械点的弹性作用，按键开关在闭合时不会马上稳定的接通，在断开时也不会一下子断开，因而在**闭合和断开的瞬间均伴随着一连串的抖动**。抖动时间的长短由按键的机械特性决定的，一般为 5ms 到 10ms。

>**按键稳定闭合时间的长短则由操作人员的按键动作决定的**，一般为零点几秒至数秒。按键抖动会引起按 键被误读多次。为了确保 CPU 对按键的一次闭合仅作一次处理，必须进行消抖。

消抖的方式：**硬件消抖**和**软件消抖**

# 硬件原理

![[独立按键硬件结构.png]]

可以看出，控制与LED灯类似

# 编程

~~~
#include<STC89C5xRC.H>
#include<intrins.h>
  
void Delay1ms(unsigned int xms);
  
void main(){
    P2=0xFF;
    while(1){
        if(P31 == 0){//检测按下P31按钮
            Delay1ms(15);//按下消抖
            while(P31 == 0)
                continue;//如果用户持续按下，就会在这里循环
            Delay1ms(15);//松开消抖
            P2--;//LED移动
        }
    }
}//已省略delay函数