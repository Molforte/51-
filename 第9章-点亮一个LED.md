# GPIO介绍
#GPIO
## GPIO概念

>GPIO（general purpose intput output）是通用输入输出端口的简称，可 以通过软件来控制其输入和输出。51单片机芯片的 GPIO 引脚与外部设备连接 起来，从而实现与外部通讯、控制以及数据采集的功能。

最简单的应用：点亮LED灯（用软件控制来输出高低电平即可）


单片机的引脚可分为：
+ 电源引脚：VCC、GND
+ 晶振引脚：XTAL1、XTAL2
+ 复位引脚：PST/VPD
+ 下载引脚：TXD、RXD
+ **GPIO引脚：GPIO占用了大部分芯片的引脚**
***以下是STC89C52的管脚说明***
![[STC89C51的管脚说明A.png]]![[STC89C51的管脚说明B.png]]
*要想更好开发得配合[STC89C52.H](C:\Keil\Keil_C51\C51\INC\STC\STC89C5xRC.H)来看*
## GPIO结构框图与工作原理
### P0端口
P0端口的每个单元部分：
+ **输入缓冲器**:是计算机系统中用于临时存储输入数据的一种机制或存储区域，主要用于**协调不同设备或处理单元之间的速度差异**，确保数据高效、可靠地传输和处理。
+ **D锁存器**:类似于一个中继器被另一个中继器锁住的原理。D触发器类似于在锁中继器的高电平端加了个t触。（很简便锁存信息的东西）
---
# LED设计
#LED
LED即发光二极管，具有单向导电性，通过5mA左右的电流即可发光，电流越大，亮度越强，若电流过大，会烧毁二极管。**我们一般控制在3mA~20mA之间**，我们会在管教上串联一个电阻（“限流电阻”）限制通过LED的电流不要过大。

LED主要有**直插式发光**（*一些玩具上，和小时候的印象里有*），和**贴片式发光**（*单片机里那种贴片LED*）

发光二极管正极又称阳极，负极又称阴极，电流只能从阳极流向阴极。直插式发光二极管长脚为阳极，短脚为阴极。贴片式发光二极管有彩色标记的一端通常为阴极。

---
# 软件设计

## LED流水灯
## 移位和循环实现

可以通过`P2=~(0x01<<i)`这样的代码来控制。其中P2控制的是8个位（也就是8个LED。*这个是控制的8个LED，普中科技51单片机，那边的一排LED是可位寻址的*

用上面这条代码可以控制P2的位数左移，实现LED的流水灯。

## 使用左移_crol_、右移_cror_函数来实现
#intrins
需要添加头文件`#include"intrins.h"`
`P2=_crol_(P2,2)`即将P2的数据左移2位，并赋给P2，可以用循环持续赋值，就达到流水灯的效果。
~~~
#include <STC89C5xRC.H>
#include "intrins.h" 
void main() { 
	u8 i=0; //typedef unsigned char u8;
	LED_PORT=~0x01; 
	delay_10us(50000); 
	while(1) { 
		for(i=0;i<7;i++){ 
			LED_PORT=_crol_(LED_PORT,1); 
			delay_10us(50000); 
			} 
		for(i=0;i<7;i++){ 
			LED_PORT=_cror_(LED_PORT,1); 
			delay_10us(50000); 
		} 
	} 
}
~~~


